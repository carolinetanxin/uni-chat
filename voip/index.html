<!-- webview.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>webview</title>
  </head>

  <body>
    <div>
      <p id="messageText"></p>
      <div class="btn-list">
        <button class="btn btn-red" type="button" id="clickMe">
          点击我给 APP 传递参数
        </button>
      </div>
    </div>

    <script
      type="text/javascript"
      src="https://static.wildfirechat.cn/uni.webview.1.5.4.js"
    ></script>
    <script type="text/javascript">
      window.msgFromUniapp= function (data) {
        let canshutype = typeof data;
        let mes = typeof data == "object" ? JSON.stringify(data) : data;
        document.getElementById("messageText").innerHTML =
          "恭喜你，接收到你的参数\n，参数是" + canshutype + "参数如下:\n" +mes.length + ' '  + mes;
        console.log("data", data);
      };

      document.addEventListener("UniAppJSBridgeReady", function () {
        document
          .getElementById("clickMe")
          .addEventListener("click", function () {
            let data = {
              user_id: "ys123456",
              user_token: "67374b30-cac6-4efb-adc9-88231b9ac44c",
              user_info: {
                name: "Iuhuy",
                avatar:
                  "http://thirdwx.qlogo.cn/mmopen/vi_32/EURpungADj4vP3UczBVvD1DcEUt9q7WFqc6mZlSZoXoS9PyaPicnX8pjmic0rLbmwYCSa247gibINd1dWr0ic1QTvw/132",
              },
            };
            console.log("给 uni-app 发送数据", data);

            uni.postMessage({
              data: data,
            });
          });
      });
    </script>
  </body>
</html>

